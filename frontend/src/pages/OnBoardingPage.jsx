/* eslint-disable react-hooks/exhaustive-deps */
import { useState, useEffect } from "react";
import { Link, useNavigate } from "react-router-dom";
import axios from "axios";
import img2 from "../assets/screen2PNG.png";
import { useAuth, useUser } from "@clerk/clerk-react";

const OnBoardingPage = () => {
  // <-------- Check isLoggedIn -------->
  const navigate = useNavigate();
  if (!useUser().isSignedIn) {
    navigate("/login");
  }
  const clerkUserId = useAuth().userId;
  const { userId } = useAuth();
  useEffect(() => {
    const fetchEffect = async () => {
      if (userId) {
        const res = await axios.get(`/check/${userId}`);

        if (res.data.message === "User does not exist") {
          navigate("/login");
        } else if (res.data.data) {
          if (res.data.data.role === "admin") {
            navigate(`/admin/${userId}`);
          } else {
            if (res.data.data.on_boarding === 0) {
              console.log("send to onBoarding");
            } else if (res.data.data.path === "") {
              navigate("/survey");
            } else {
              navigate(`/path/${userId}`);
            }
          }
        }
      }
    };

    fetchEffect();
  });

  const [screen, setScreen] = useState(1);
  const handleOnBoardingDone = async (clerkUserId) => {
    const response = await axios.put("/on-boarding", { id: clerkUserId });
    const data = await axios.get(`/get-user-by-id/${clerkUserId}`);
    if (response && data.data) {
      navigate("/survey");
    }
  };

  {
    if (screen === 1) {
      return (
        <div className="justify-center items-center h-screen w-screen flex flex-col mx-auto p-5 max-w-96">
          <div>
            <svg
              width="155"
              height="354"
              viewBox="0 0 155 354"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clipPath="url(#clip0_195_23)">
                <path
                  d="M109.031 100.55C109.031 100.55 110.309 88.1663 121.013 92.0292C131.717 95.8922 130.979 117.849 130.979 128.386C131.002 134.684 130.594 140.976 129.758 147.218C129.758 147.218 107.81 148.07 109.031 100.55Z"
                  fill="#25252D"
                />
                <path
                  d="M70.5861 164.886C70.5861 164.886 66.2419 166.249 62.0681 167.953C57.8942 169.658 57.4399 169.856 58.3485 170.396C59.2571 170.936 60.904 170.197 61.8693 170.396C62.8347 170.595 60.3361 172.555 59.2571 176.077C57.6955 181.19 62.0965 180.593 64.9358 178.69C66.3351 177.603 67.6281 176.386 68.7973 175.054C70.2662 173.391 71.861 171.843 73.5674 170.424C75.1146 169.095 76.446 167.533 77.5141 165.795C76.5231 165.085 75.3724 164.631 74.1639 164.472C72.9555 164.314 71.7266 164.456 70.5861 164.886Z"
                  fill="#FFC5B3"
                />
                <path
                  d="M97.1908 213.173C97.1908 213.173 98.6956 222.716 98.7808 226.977C98.7399 230.79 99.0919 234.598 99.8313 238.339C100.712 243.281 102.018 263.164 102.046 269.754C101.649 275.183 99.7521 280.395 96.5661 284.808C95.0612 287.165 99.8313 290.886 103.437 287.421C107.043 283.956 107.441 283.274 109.485 282.194C111.529 281.115 113.034 276.514 111.416 271.259C109.797 266.004 110.592 255.864 112.296 246.888C114 237.913 111.529 226.551 112.523 223.881C113.517 221.211 97.1908 213.173 97.1908 213.173Z"
                  fill="#FFA08D"
                />
                <path
                  d="M96.5663 284.865C94.4735 286.574 92.4914 288.414 90.6321 290.375C89.1272 292.193 93.7554 294.863 98.128 293.215C102.501 291.568 106.107 287.534 109.485 284.438C112.864 281.342 113.83 280.291 113.659 276.798C113.405 275.461 112.751 274.233 111.785 273.276C111.142 277.29 108.963 280.896 105.709 283.331C101.052 286.285 99.0933 286.711 96.5663 284.865Z"
                  fill="#25252D"
                />
                <path
                  d="M111.104 220.87C111.104 220.87 111.615 230.471 111.7 234.731C111.833 238.314 112.503 241.857 113.687 245.241C114.965 250.098 115.931 270.804 115.959 277.508C115.542 282.937 113.636 288.146 110.451 292.562C108.946 294.92 113.716 298.64 117.35 295.175C119.08 293.137 121.11 291.375 123.37 289.949C125.414 288.869 126.947 284.268 125.329 279.013C123.71 273.759 124.477 263.618 126.209 254.643C127.941 245.667 125.073 234.248 125.698 231.465C127.231 224.619 130.922 214.025 127.061 211.724C123.199 209.423 111.104 220.87 111.104 220.87Z"
                  fill="#FFC5B3"
                />
                <path
                  d="M110.479 292.562C108.394 294.279 106.412 296.12 104.545 298.072C103.068 299.89 107.668 302.56 112.041 300.913C116.413 299.265 120.048 295.232 123.398 292.136C126.748 289.04 127.742 287.989 127.572 284.495C127.307 283.259 126.708 282.119 125.84 281.2C125.131 285.194 122.902 288.757 119.622 291.142C114.965 293.982 113.006 294.408 110.479 292.562Z"
                  fill="#25252D"
                />
                <path
                  d="M94.4083 176.872C94.4083 176.872 94.0676 187.467 94.0676 196.215C93.8688 207.009 94.0676 221.779 94.0676 221.779C94.0676 221.779 109.059 232.913 121.24 228.994C121.978 225.784 123.029 217.802 123.029 217.802C124.38 221.092 124.935 224.654 124.647 228.198C126.943 227.42 129.086 226.247 130.979 224.733C130.979 224.733 131.206 195.136 126.663 178.946C122.12 162.755 94.749 168.465 94.4083 176.872Z"
                  fill="#001F3F"
                />
                <path
                  d="M131.774 142.02C130.951 136.198 117.577 128.33 117.577 128.33C116.722 131.224 115.346 133.939 113.517 136.34C111.558 138.082 109.744 139.982 108.094 142.02C108.391 138.14 109.212 134.318 110.536 130.659C110.79 128.402 110.675 126.118 110.195 123.899L108.264 123.728C106.504 125.688 103.068 130.829 101.223 132.959C99.3772 135.09 94.0676 142.02 95.6577 148.866C96.8872 154.167 97.544 159.586 97.6168 165.028C96.7693 169.635 95.583 174.173 94.0676 178.605C98.394 182.653 104.047 184.986 109.968 185.166C115.97 184.808 121.648 182.32 125.982 178.15C124.891 171.573 124.236 164.931 124.023 158.268C126.841 156.7 129.101 154.293 130.49 151.381C131.879 148.47 132.328 145.198 131.774 142.02Z"
                  fill="white"
                />
                <path
                  d="M110.848 124.978C110.848 124.978 103.494 117.564 96.2824 130.403C92.9732 137.407 90.0445 144.585 87.5088 151.905C84.8966 153.382 81.461 155.598 77.9118 157.927C74.8169 159.943 68.1729 164.516 68.1729 164.516C69.3878 165.515 70.3589 166.778 71.0122 168.209C71.6339 169.679 72.0542 171.227 72.2615 172.81C76.3001 171.999 80.2014 170.612 83.8461 168.692C87.3036 167.136 90.4349 164.939 93.0739 162.216C100.144 154.689 110.848 124.978 110.848 124.978Z"
                  fill="#001F3F"
                />
                <path
                  d="M108.037 129.835C108.037 129.835 100.059 142.475 104.602 153.78C101.933 160.966 102.245 178.065 101.45 181.019C100.201 185.876 93.3294 184.797 92.0801 180.309C92.0801 180.309 97.4181 156.904 95.6577 148.866C93.8973 140.827 95.828 138.839 101.336 131.596C106.845 124.353 106.646 125.716 106.646 125.716L108.037 129.835Z"
                  fill="#1F7F46"
                />
                <path
                  d="M106.589 127.25C104.46 130.091 100.485 135.516 100.485 135.516L102.046 137.703C101.109 138.282 100.29 139.034 99.6328 139.918C99.6328 143.554 104.602 153.78 104.602 153.78C103.818 146.55 105.297 139.256 108.832 132.903C110.735 129.835 109.627 129.807 109.627 129.807C109.627 129.807 107.583 127.137 106.589 127.25Z"
                  fill="#001F3F"
                />
                <path
                  d="M110.223 98.8746C110.815 97.7247 111.825 96.8453 113.045 96.4173C114.265 95.9894 115.602 96.0454 116.782 96.5739C118.018 97.1404 119.058 98.0608 119.77 99.2186C120.483 100.376 120.836 101.72 120.786 103.078L110.223 98.8746Z"
                  fill="white"
                />
                <path
                  d="M109.542 124.978C109.601 127.969 109.287 130.956 108.605 133.868C106.589 138.64 112.268 138.583 114.284 137.021C116.741 135.143 118.814 132.81 120.388 130.147L119.253 114.468L109.542 124.978Z"
                  fill="#FFA08D"
                />
                <path
                  d="M115.448 104.271C114.066 103.352 112.482 102.781 110.832 102.607C109.181 102.433 107.513 102.661 105.97 103.272C104.427 103.884 103.055 104.86 101.971 106.117C100.887 107.374 100.124 108.875 99.7463 110.492C96.9069 120.376 106.163 132.079 110.763 129.807C113.318 128.5 118.458 125.489 119.764 120.291C121.183 114.468 118.486 106.373 115.448 104.271Z"
                  fill="#FFC5B3"
                />
                <path
                  d="M119.622 118.701C119.792 120.291 119.622 121.541 119.849 123.188C121.851 119.625 123.017 115.652 123.256 111.571C123.654 101.999 117.89 99.9255 115.136 98.9314C109.457 96.9715 105.964 99.0734 100.939 104.016C99.4467 105.54 98.3171 107.381 97.6338 109.402C96.9505 111.423 96.7312 113.572 96.9922 115.69C100.998 118.325 105.37 120.354 109.968 121.711C111.84 121.788 113.698 121.346 115.334 120.433C115.972 119.591 116.728 118.845 117.577 118.218C118.23 117.792 119.451 118.019 119.622 118.701Z"
                  fill="#383842"
                />
                <path
                  d="M120.36 128.386C115.885 137.31 110.611 145.809 104.602 153.78C101.762 159.46 101.308 167.527 100.91 174.884C100.513 182.667 98.3834 184.456 106.305 188.319C116.584 193.347 129.701 184.456 129.701 184.456C129.701 184.456 125.3 169.743 126.095 165.227C126.89 160.71 132.541 140.913 130.695 137.703C128.85 134.493 120.36 128.386 120.36 128.386Z"
                  fill="#1F7F46"
                />
                <path
                  d="M119.906 124.978C119.906 124.978 114.227 134.749 112.438 138.015C109.53 143.156 106.913 148.458 104.602 153.893L117.521 144.861L115.931 141.339L119.423 138.953C120.795 136.408 121.963 133.758 122.915 131.028C123.256 128.358 119.906 124.978 119.906 124.978Z"
                  fill="#001F3F"
                />
                <path
                  d="M125.016 131C121.441 133.77 118.116 136.85 115.079 140.203C109.627 146.281 104.885 159.716 103.551 162.358C101.845 154.449 101.376 146.324 102.16 138.271C102.877 134.909 104.215 131.711 106.106 128.841L105.425 128.216C103.425 131.205 101.991 134.536 101.194 138.044C99.5759 145.486 102.841 163.409 103.04 163.892L103.494 165.056L104.005 163.92C104.005 163.92 109.144 148.468 115.902 140.913C118.995 137.675 122.265 134.612 125.698 131.738C126.01 131.426 126.067 130.233 125.016 131Z"
                  fill="white"
                />
                <path
                  d="M100.456 158.381L99.7463 168.947V168.976L106.476 172.839L107.157 162.272L100.456 158.381Z"
                  fill="white"
                />
                <path
                  d="M100.882 159.347L100.797 160.54L106.532 163.863L106.589 162.67L100.882 159.347Z"
                  fill="#C63856"
                />
                <path
                  d="M102.898 162.784L102.387 169.714L105.851 171.703L106.362 164.772L102.898 162.784Z"
                  fill="#E2E2ED"
                />
                <path
                  d="M110.848 181.019C109.508 181.896 108.03 182.539 106.476 182.922C104.7 183.396 103.012 184.153 101.478 185.166C99.4909 186.643 96.1404 188.007 97.0206 188.631C97.9008 189.256 100.286 188.404 101.251 188.12C102.217 187.836 100.967 190.165 99.3773 191.955C98.5439 192.699 97.9486 193.673 97.6658 194.754C97.3829 195.835 97.4252 196.976 97.7872 198.033C98.639 200.306 104.034 195.676 106.107 193.545C108.662 190.904 112.438 186.274 112.438 186.274L110.848 181.019Z"
                  fill="#FFC5B3"
                />
                <path
                  d="M134.926 165.965C134.926 160.767 135.181 154.376 135.096 148.724C135.011 143.071 133.705 136.936 128.793 136.169C125.3 137.05 121.836 142.02 121.013 147.701C120.683 154.827 120.901 161.968 121.666 169.061C119.792 170.084 105.084 181.587 105.084 181.587C106.691 182.795 107.993 184.361 108.889 186.16C109.528 187.623 109.885 189.194 109.94 190.79C109.94 190.79 126.323 182.269 131.064 179.088C135.806 175.906 135.039 171.646 134.926 165.965Z"
                  fill="#001F3F"
                />
                <path
                  d="M116.129 259.017L0 191.955L38.8991 169.487L155 236.549L116.129 259.017Z"
                  fill="#E2E2ED"
                />
                <path
                  d="M0 191.955V197.408L116.129 264.47V259.017L0 191.955Z"
                  fill="#CACADD"
                />
                <path
                  d="M155 236.549V242.003L116.129 264.47V259.017L155 236.549Z"
                  fill="#B1B1C9"
                />
                <path
                  d="M0 197.408V207.918V223.199V250.496V286.91L24.0777 300.828L116.129 354V264.47L0 197.408Z"
                  fill="#001F3F"
                />
                <path
                  d="M155 242.003V331.532L116.129 354V264.47L155 242.003Z"
                  fill="#01182D"
                />
                <path
                  d="M155 67.3461L148.952 70.8398V240.185L155 236.691V67.3461Z"
                  fill="#B1B1C9"
                />
                <path
                  d="M145.517 68.8515V238.197L148.952 240.185V70.8398L145.517 68.8515Z"
                  fill="#CACADD"
                />
                <path
                  d="M42.5617 2.15871L36.5139 5.65241V174.969L42.5617 171.475V2.15871Z"
                  fill="#B1B1C9"
                />
                <path
                  d="M33.05 3.66412V173.009L36.5141 174.969V5.65241L33.05 3.66412Z"
                  fill="#CACADD"
                />
                <path
                  d="M127.714 58.7396L32.8228 3.91977V34.511L101.507 74.1631L124.477 87.4278L148.952 101.573V83.65V70.9818L127.714 58.7396Z"
                  fill="#001F3F"
                />
                <path
                  d="M155 67.4881L148.952 70.9818V101.573L155 98.0793V67.4881Z"
                  fill="#01182D"
                />
                <path
                  d="M32.8228 3.91976L39.1829 0L155 67.4881L148.952 70.9818L32.8228 3.91976Z"
                  fill="#032F4F"
                />
              </g>
              <defs>
                <clipPath id="clip0_195_23">
                  <rect width="155" height="354" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </div>
          <div className="flex flex-col my-5">
            <h4
              className=" font-extrabold text-3xl"
              style={{ color: "#252525" }}
            >
              Your Journey
            </h4>
            <p
              className=" my-1 font-light text-xl"
              style={{ color: "#929292" }}
            >
              Today you’ll be visiting 4 stands. Each stand represents a certain
              topic that can be troublesome for you.
            </p>
          </div>
          <div className="flex flex-row w-full justify-between">
            <div className="flex flex-row items-center">
              <div
                style={{
                  backgroundColor: "#5151FC",
                  width: "16px",
                  height: "6px",
                  borderRadius: "10px",
                }}
              ></div>
              <div
                className="mx-1"
                style={{
                  backgroundColor: "#ABABFF",
                  width: "13px",
                  height: "6px",
                  borderRadius: "10px",
                }}
              ></div>
              <div
                style={{
                  backgroundColor: "#ABABFF",
                  width: "13px",
                  height: "6px",
                  borderRadius: "10px",
                }}
              ></div>
            </div>
            <div className=" cursor-pointer" onClick={() => setScreen(2)}>
              <svg
                width="50"
                height="50"
                viewBox="0 0 50 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle cx="25" cy="25" r="25" fill="#4B00FA" />
                <path
                  d="M22 32L28 26L22 20"
                  stroke="white"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </svg>
            </div>
          </div>
        </div>
      );
    }
    if (screen === 2) {
      return (
        <div className="justify-center items-center h-screen w-screen flex flex-col mx-auto p-5 max-w-96">
          <div>
            <img src={img2} alt="screen2" />
          </div>
          <div className="flex flex-col my-5">
            <h4
              className=" font-extrabold text-3xl"
              style={{ color: "#252525" }}
            >
              Finding Your Path{" "}
            </h4>
            <p
              className=" my-1 font-light text-xl"
              style={{ color: "#929292" }}
            >
              To know which stand you should visit first, you need to take a
              survey.
            </p>
          </div>
          <div className="flex flex-row w-full justify-between">
            <div className="flex flex-row items-center">
              <div
                style={{
                  backgroundColor: "#ABABFF",
                  width: "13px",
                  height: "6px",
                  borderRadius: "10px",
                }}
              ></div>
              <div
                className="mx-1"
                style={{
                  backgroundColor: "#5151FC",
                  width: "16px",
                  height: "6px",
                  borderRadius: "10px",
                }}
              ></div>
              <div
                style={{
                  backgroundColor: "#ABABFF",
                  width: "13px",
                  height: "6px",
                  borderRadius: "10px",
                }}
              ></div>
            </div>
            <div className=" cursor-pointer" onClick={() => setScreen(3)}>
              <svg
                width="50"
                height="50"
                viewBox="0 0 50 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle cx="25" cy="25" r="25" fill="#4B00FA" />
                <path
                  d="M22 32L28 26L22 20"
                  stroke="white"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </svg>
            </div>
          </div>
        </div>
      );
    }

    if (screen === 3) {
      return (
        <div className=" justify-center items-center h-screen w-screen flex flex-col mx-auto p-5 max-w-96">
          <div className="my-20">
            <svg
              width="188"
              height="188"
              viewBox="0 0 188 188"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M88 3.4641C91.7128 1.32051 96.2872 1.32051 100 3.4641L169.406 43.5359C173.119 45.6795 175.406 49.641 175.406 53.9282V134.072C175.406 138.359 173.119 142.321 169.406 144.464L100 184.536C96.2872 186.679 91.7128 186.679 88 184.536L18.5936 144.464C14.8808 142.321 12.5936 138.359 12.5936 134.072V53.9282C12.5936 49.641 14.8808 45.6795 18.5936 43.5359L88 3.4641Z"
                fill="#2DC86E"
              />
              <path
                d="M81.602 85.692V73.916H101.314V120.7H88.194V85.692H81.602Z"
                fill="white"
              />
            </svg>
          </div>
          <div className="flex flex-col my-5">
            <h4
              className=" font-extrabold text-3xl"
              style={{ color: "#252525" }}
            >
              Ready, Set, Go!
            </h4>
            <p
              className=" my-1 font-light text-xl"
              style={{ color: "#929292" }}
            >
              To progress, always follow the unlocked dot.
            </p>
          </div>
          <div className="flex flex-row w-full justify-between">
            <div className="flex flex-row items-center">
              <div
                style={{
                  backgroundColor: "#ABABFF",
                  width: "13px",
                  height: "6px",
                  borderRadius: "10px",
                }}
              ></div>
              <div
                className="mx-1"
                style={{
                  backgroundColor: "#ABABFF",
                  width: "13px",
                  height: "6px",
                  borderRadius: "10px",
                }}
              ></div>
              <div
                style={{
                  backgroundColor: "#5151FC",
                  width: "16px",
                  height: "6px",
                  borderRadius: "10px",
                }}
              ></div>
            </div>
            <Link
              onClick={() => {
                handleOnBoardingDone(clerkUserId);
              }}
            >
              <svg
                width="50"
                height="50"
                viewBox="0 0 50 50"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle cx="25" cy="25" r="25" fill="#4B00FA" />
                <path
                  d="M22 32L28 26L22 20"
                  stroke="white"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </svg>
            </Link>
          </div>
        </div>
      );
    }
  }
};

export default OnBoardingPage;
